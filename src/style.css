@import url("https://fonts.googleapis.com/css2\
?family=Inter:wght@400;500;600\
&family=IBM+Plex+Sans:wght@300;400;500;600;700\
&family=IBM+Plex+Mono:wght@300;400;500;600;700\
&family=Exo+2:wght@200;300;400;500\
&display=swap");

/* ───────────────────────────────────────────────
   0.  GLOBAL FONT TOKENS
   ─────────────────────────────────────────────── */
:root{
  /* swap families here and every panel updates */
  --pl-body-font: "Inter", "IBM Plex Sans", system-ui, -apple-system,
                  "Segoe UI", Roboto, "Helvetica Neue", sans-serif;

  /* mono family for your numeric column */
  --pl-mono-font: "IBM Plex Mono", Menlo, Consolas, monospace;
}

main { position: absolute; top: 100px; left: 100px; }
body {
  margin: 0;
  padding: 0;
  background-color: black;
}

canvas {
  display: block;
}

/*Make dat gui panel unselectable so it doesent get selected during mouse drag*/
#gui {  
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}
a {color: white;
}
a:link {
  text-decoration: none;
}

#footerleft {
  font-family: "Inter", sans-serif;
  position: absolute;
  display: block;
  width: 100%;
  font-size: 70%;
  bottom: 3px;
  left: 5px;
  z-index: 1000;
  color: #f2f5f0;
  font-size: 0.6em;
  opacity: 0.4;
  text-align: left;
  text-decoration: none;
  position: fixed;
} 

#footerright {
  font-family: "Inter", sans-serif;
  position: absolute;
  display: block;
  width: 100%;
  font-size: 70%;
  bottom: 3px;
  right: 5px;
  z-index: 1000;
  color: #f2f5f0;
  font-size: 0.6em;
  opacity: 0.4;
  text-align: right;
  text-decoration: none;
  position: fixed;
} 

.highlight-perihelion input[type="text"] {
  background: none !important;
  border: none !important;
  color: grey !important;
  font-weight: bold !important;
  text-align: right !important;
  pointer-events: none !important;
}

.dg {
  z-index: 10 !important;
}

/* 1) Hide the native checkbox visuals */
.dg li .c input[type="checkbox"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 32px;
  height: 16px;
  background: #ccc;
  border-radius: 8px;
  position: relative;
  outline: none;
  cursor: pointer;
  transition: background 0.2s ease;
}

/* 2) The “knob” */
.dg li .c input[type="checkbox"]::after {
  content: "";
  position: absolute;
  top: 2px;
  left: 2px;
  width: 12px;
  height: 12px;
  background: white;
  border-radius: 50%;
  box-shadow: 0 1px 2px rgba(0,0,0,0.3);
  transition: left 0.2s ease;
}

/* 3) Checked state */
.dg li .c input[type="checkbox"]:checked {
  background: #4caf50;
}

.dg li .c input[type="checkbox"]:checked::after {
  left: 18px;
}

/* first reset the default on everything */
.dg li .c {
  overflow: visible !important;
}
/* then only clamp the boolean rows */
.dg li.cr.boolean .c {
  overflow: hidden;
}

.star-label {
  position: absolute;      /* our CSS2DRenderer will handle top/left */
  transform: translate(-50%, -120%); /* center + lift above */
  padding: 2px 6px;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(4px);
  border-radius: 4px;
  font-family: 'Open Sans' !important;
  font-size: 12px;
  font-weight: 500;
  color: grey !important;
  text-shadow: 0 0 4px rgba(0, 0, 0, 0.7);
  white-space: nowrap;
  pointer-events: none;
  user-select: none;
}

#guiWidthToggle {
  position:fixed;                  /* follow the viewport */
  width:26px;                      /* finger target */
  writing-mode:vertical-rl;
  text-orientation:mixed;
  font:13px/1 sans-serif;
  color:#fff;
  background:rgba(0,0,0,.35);
  cursor:pointer;
  user-select:none;
  touch-action:manipulation;
  z-index:1000;                    /* above the canvas & GUI */
}

/* ==========================================================
   TOP-LEFT “PLANET INFO” PANEL
   ========================================================== */

/* ───────────────────────────────────────────────
   1.  ROOT WRAPPER   (#planetLabel)
   ─────────────────────────────────────────────── */
#planetLabel{
  /* geometry / layout */
  position:fixed;
  inset:0 auto 0 0;           /* top:0; right:auto; bottom:0; left:0 */
  width:33.333vw;             /* one-third of the viewport           */
  height:100vh;
  transform:none !important;
  overflow:hidden;            /* clip anything outside the drawer    */
  display:none;
  z-index:9999;

  /* design-tokens (can be overridden by themes) */
  --planet-info-font-size:13px;
  --panel-bg     : rgba(20,24,30,.80);
  --panel-border : rgba(255,255,255,.15);
}

/* per-planet colour themes (override 2 CSS variables) */
#planetLabel.theme-earth   { --panel-bg:rgba( 46,100,190,.58); --panel-border:rgba( 46,100,190,.28); }
#planetLabel.theme-moon    { --panel-bg:rgba(120,120,120,.58); --panel-border:rgba(255,255,255,.28); }
#planetLabel.theme-mercury { --panel-bg:rgba(110,110,110,.58); --panel-border:rgba(255,255,255,.28); }
#planetLabel.theme-venus   { --panel-bg:rgba(213,171, 55,.58); --panel-border:rgba(213,171, 55,.28); }
#planetLabel.theme-mars    { --panel-bg:rgba(176, 58, 46,.58); --panel-border:rgba(176, 58, 46,.28); }
#planetLabel.theme-jupiter { --panel-bg:rgba(201,126, 79,.58); --panel-border:rgba(201,126, 79,.28); }
#planetLabel.theme-saturn  { --panel-bg:rgba(217,182, 92,.58); --panel-border:rgba(217,182, 92,.28); }
#planetLabel.theme-uranus  { --panel-bg:rgba( 55,198,208,.58); --panel-border:rgba( 55,198,208,.28); }
#planetLabel.theme-neptune { --panel-bg:rgba( 44, 83,158,.58); --panel-border:rgba( 44, 83,158,.28); }
#planetLabel.theme-pluto   { --panel-bg:rgba(201,178,154,.58); --panel-border:rgba(201,178,154,.28); } 
#planetLabel.theme-halleys { --panel-bg:rgba(158,203,255,.58); --panel-border:rgba(158,203,255,.28); } 
#planetLabel.theme-eros    { --panel-bg:rgba(142,128,116,.58); --panel-border:rgba(142,128,116,.28); } 
#planetLabel.theme-sun     { --panel-bg:rgba(255,174,  0,.60); --panel-border:rgba(255,174,  0,.30); }

/* drawer slide-in effect (optional) */
#planetLabel[style*="display: block"]{
  animation:pl-slide 320ms cubic-bezier(.25,.8,.25,1);
}
@keyframes pl-slide{
  from{ transform:translateX(-100%); opacity:0; }
  to  { transform:none;            opacity:1; }
}

/* ───────────────────────────────────────────────
   2.  GLASS PANEL BODY   (.labelContent)
   ─────────────────────────────────────────────── */
#planetLabel .labelContent{
  /* full-size glass card */
  position:relative;
  width:100%;
  height:100%;
  display:flex;
  flex-direction:column;
  padding:14px 18px 16px;
  box-sizing:border-box;

  /* frosted look */
  background:var(--panel-bg);
  border:1px solid var(--panel-border);
  backdrop-filter:blur(6px);
  border-radius:0;            /* flush with drawer edges */
  box-shadow:0 6px 18px rgba(0,0,0,.35);

  /* Typography tokens */
  color:#eee;
  font:var(--planet-info-font-size)/1.1 var(--pl-body-font);
}

/* ───── close (×) button ───── */
#planetLabel .closeBtn{
  position:absolute; top:8px; right:12px;
  width:20px; height:20px; cursor:pointer; 
  user-select:none; opacity:.8;
  transition:opacity .15s, transform .3s cubic-bezier(.34,1.56,.64,1);

  /* center the pseudo lines */
  display:flex; align-items:center; justify-content:center;
}
#planetLabel .closeBtn:hover{
  opacity:1; transform:rotate(180deg);
}

/* draw the two bars */
#planetLabel .closeBtn::before,
#planetLabel .closeBtn::after{
  content:''; position:absolute;
  width:2px; height:18px; background:#fff;
  border-radius:1px;
}
#planetLabel .closeBtn::before{ transform:rotate(45deg); }
#planetLabel .closeBtn::after { transform:rotate(-45deg); }

/* ───────────────────────────────────────────────
   3.  HEADER ZONE (title + intro + image)
   ─────────────────────────────────────────────── */
.pl-title{
  display:flex; align-items:center; gap:.35em;
  margin:0 0 .65em;
  font:600 1.15em/1.1 inherit;
  letter-spacing:.02em;
  text-shadow:0 0 3px rgba(0,0,0,.35);
  color:#fff;
}
.pl-symbol{ font-size:1.35em; line-height:1; opacity:.9; }
.pl-name  { font-variant:small-caps; }

.pl-intro{ margin:.5em 0 1em; line-height:1.3; }
.pl-img{
  width:100%; max-height:28vh; object-fit:cover;
  border-radius:8px; margin:0 0 1em;
}

/* ───────────────────────────────────────────────
   4.  SCROLLABLE DATA ZONE
   ─────────────────────────────────────────────── */
#planetLabel .labelBody{
  /* let it grow or shrink vertically so the data zone can scroll */
  flex:1 1 auto;
  min-height:0;

  /* column layout so header / intro / image / scrollBox stack vertically */
  display:flex;
  flex-direction:column;

  /* NO overflow here – only the .scrollBox scrolls */
}

/* 1.  THE *ONLY* SCROLLABLE AREA
      ------------------------------------------------------- */
.scrollBox{
  flex:1 1 auto;      /* fill remaining height                     */
  min-height:0;       /* let it shrink when the grid is taller     */
  min-width:0;        /* ← KEY: allows grid to shrink horizontally */
  overflow:auto;      /* vertical + horizontal scrollbars          */
  overscroll-behavior:contain;
  padding-right:6px;  /* leave room for the vertical scrollbar     */
  max-width:100%;
}

/* keep your existing thumb colours … */
.scrollBox::-webkit-scrollbar{ width:6px; }
.scrollBox::-webkit-scrollbar-thumb{
  background:rgba(255,255,255,.25);
  border-radius:3px;
}
#planetLabel.theme-mars .scrollBox::-webkit-scrollbar-thumb{
  background:rgba(176,58,46,.4);
}

/* ───────────────────────────────────────────────
   5.  3-COLUMN GRID
   ─────────────────────────────────────────────── */
.pl-grid{
  display:grid;
  column-gap:.75em; row-gap:.3em;
  align-items:center;
  min-width:100%;                      /* prevents width jump */
}

/* zebra stripes (apply to each row’s 3 spans) */
.pl-grid span:nth-child(6n+1),
.pl-grid span:nth-child(6n+2),
.pl-grid span:nth-child(6n+3){
  background:rgba(255,255,255,.03);
}

/* cell roles */
.pl-key, .pl-val, .pl-alt{
  font:inherit;
  font-variant-numeric:tabular-nums;
}
.pl-key{ white-space:nowrap; text-align:left; }

/* NEW → mono family for aligned numbers */
.pl-val{
  text-align:right;
  font-family:var(--pl-mono-font);
}
.pl-alt{ text-align:left;  opacity:.9; }

/* header row + blank row helpers */
.pl-head{ grid-column:1/-1; text-align:center; font-weight:600; padding:.2em 0; }
.pl-blank{ height:.6em; }

/* info-tip icon */
.pl-info{ margin-right:.25em; text-decoration:none; opacity:.8; cursor:help; }
.pl-info:hover{ opacity:1; }

/* ─── emphasis helpers inside value cells ─── */
.pl-val strong, .pl-alt strong{ font-weight:600; color:#fff; }
.pl-val em,     .pl-alt em    { font-style:italic; opacity:.9; }
.pl-val small,  .pl-alt small { font-size:.85em;   opacity:.85; }

/* rare utility if you need it */
.smallcaps{ font-variant:small-caps; }

/* ===== Title Badge (Bottom Middle) ===== */
.title-badge {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  padding: 10px 20px;
  background: rgba(255, 255, 255, 0.06);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 8px;
  font-family: 'Exo 2', system-ui, sans-serif;
  font-size: 13px;
  font-weight: 400;
  letter-spacing: 0.12em;
  color: rgba(255, 255, 255, 0.85);
  text-transform: uppercase;
  pointer-events: auto;
  cursor: default;
  animation: titleBreathe 4s ease-in-out infinite;
  transition: background 0.3s ease, border-color 0.3s ease;
}

.title-badge:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.25);
}

.title-badge .version {
  opacity: 0.6;
  font-weight: 300;
  margin-left: 0.4em;
}

@keyframes titleBreathe {
  0%, 100% { opacity: 0.85; }
  50% { opacity: 1; }
}

/* ===== Planet Hierarchy Inspector Panel ===== */
#hierarchyInspector {
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  z-index: 10000;
  width: min(420px, 90vw);
  display: none;
  flex-direction: column;
  background: rgba(20, 24, 30, 0.92);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-right: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow: 4px 0 24px rgba(0, 0, 0, 0.5);
  font-family: var(--pl-body-font);
  font-size: 13px;
  color: #e8e8e8;
  overflow: hidden;
}

#hierarchyInspector.visible {
  display: flex;
}

/* Header */
.hi-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 18px;
  background: rgba(255, 255, 255, 0.05);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.hi-header h2 {
  margin: 0;
  font-size: 15px;
  font-weight: 600;
  letter-spacing: 0.05em;
  color: #fff;
}

.hi-close {
  width: 24px;
  height: 24px;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.15s, transform 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.hi-close:hover {
  opacity: 1;
  transform: rotate(90deg);
}

.hi-close::before,
.hi-close::after {
  content: '';
  position: absolute;
  width: 2px;
  height: 16px;
  background: #fff;
  border-radius: 1px;
}

.hi-close::before { transform: rotate(45deg); }
.hi-close::after { transform: rotate(-45deg); }

/* Planet selector row */
.hi-selector {
  padding: 12px 18px;
  display: flex;
  align-items: center;
  gap: 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.hi-selector label {
  font-weight: 500;
  color: rgba(255, 255, 255, 0.8);
}

.hi-selector select {
  flex: 1;
  padding: 6px 10px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  color: #fff;
  font-family: inherit;
  font-size: 13px;
  cursor: pointer;
  outline: none;
}

.hi-selector select:focus {
  border-color: rgba(100, 150, 255, 0.5);
}

.hi-selector select option {
  background: #1a1e24;
  color: #fff;
  padding: 8px;
}

/* Step indicator */
.hi-step-indicator {
  padding: 10px 18px;
  background: rgba(100, 150, 255, 0.15);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  font-weight: 600;
  text-align: center;
  letter-spacing: 0.03em;
}

/* Body - scrollable content */
.hi-body {
  flex: 1;
  overflow-y: auto;
  padding: 14px 18px;
  min-height: 0;
}

.hi-body::-webkit-scrollbar {
  width: 6px;
}

.hi-body::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

/* Section headings */
.hi-section {
  margin-bottom: 16px;
}

.hi-section-title {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: rgba(255, 255, 255, 0.5);
  margin-bottom: 8px;
  padding-bottom: 4px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

/* Property grid */
.hi-props {
  display: grid;
  grid-template-columns: 140px 1fr;
  gap: 4px 12px;
  font-size: 12px;
}

.hi-props .hi-key {
  color: rgba(255, 255, 255, 0.6);
  white-space: nowrap;
}

.hi-props .hi-val {
  font-family: var(--pl-mono-font);
  color: #fff;
  word-break: break-word;
}

.hi-props .hi-val.hi-warn {
  color: #ffc107;
}

.hi-props .hi-val.hi-error {
  color: #ff5252;
}

/* Validation items */
.hi-validation-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 0;
  font-size: 12px;
}

.hi-validation-item.valid {
  color: #4caf50;
}

.hi-validation-item.warning {
  color: #ffc107;
}

.hi-validation-item.error {
  color: #ff5252;
}

.hi-validation-item.info {
  color: #64b5f6;
}

.hi-validation-item.reference {
  color: #888888;
}

.hi-validation-icon {
  font-size: 14px;
}

/* Hierarchy tree */
.hi-tree {
  font-family: var(--pl-mono-font);
  font-size: 11px;
  line-height: 1.6;
  color: rgba(255, 255, 255, 0.5);
  white-space: pre;
  padding: 8px 12px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 6px;
  overflow-x: auto;
}

.hi-tree .hi-current {
  color: #64b5f6;
  font-weight: 600;
}

/* Footer - navigation */
.hi-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 18px;
  background: rgba(255, 255, 255, 0.03);
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  gap: 10px;
}

.hi-nav-btn {
  padding: 8px 16px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  color: #fff;
  font-family: inherit;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s;
}

.hi-nav-btn:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.3);
}

.hi-nav-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.hi-highlight-btn {
  flex: 1;
  background: rgba(100, 150, 255, 0.2);
  border-color: rgba(100, 150, 255, 0.3);
}

.hi-highlight-btn:hover:not(:disabled) {
  background: rgba(100, 150, 255, 0.3);
}

.hi-highlight-btn.active {
  background: rgba(100, 150, 255, 0.4);
  border-color: rgba(100, 150, 255, 0.5);
}

/* Visual helpers checkboxes */
.hi-helpers {
  margin-top: 12px;
  padding: 10px 12px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 6px;
}

.hi-helpers-title {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: rgba(255, 255, 255, 0.5);
  margin-bottom: 8px;
}

.hi-helper-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 3px 0;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.8);
}

.hi-helper-row input[type="checkbox"] {
  width: 14px;
  height: 14px;
  cursor: pointer;
}

/* ===== Step 5 Position Report Styles ===== */
.hi-report-section {
  margin-bottom: 16px;
}

.hi-report-content {
  position: relative;
}

.hi-report-loading {
  padding: 20px;
  text-align: center;
  color: rgba(255, 255, 255, 0.6);
  font-style: italic;
}

.hi-report {
  font-family: var(--pl-mono-font);
  font-size: 10px;
  line-height: 1.4;
  white-space: pre;
  overflow-x: auto;
  overflow-y: auto;
  max-height: 400px;
  background: rgba(0, 0, 0, 0.3);
  padding: 12px;
  border-radius: 6px;
  color: #e8e8e8;
  user-select: text;
  margin: 0;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.hi-report::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.hi-report::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.hi-report::-webkit-scrollbar-corner {
  background: transparent;
}

.hi-report-buttons {
  display: flex;
  gap: 10px;
  margin-top: 12px;
}

.hi-report-btn {
  flex: 1;
  padding: 8px 16px;
  background: rgba(100, 181, 246, 0.2);
  border: 1px solid rgba(100, 181, 246, 0.4);
  border-radius: 6px;
  color: #64b5f6;
  font-family: inherit;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s, transform 0.1s;
}

.hi-report-btn:hover {
  background: rgba(100, 181, 246, 0.35);
  border-color: rgba(100, 181, 246, 0.6);
}

.hi-report-btn:active {
  transform: scale(0.98);
}

.hi-report-btn.download {
  background: rgba(76, 175, 80, 0.2);
  border-color: rgba(76, 175, 80, 0.4);
  color: #4caf50;
}

.hi-report-btn.download:hover {
  background: rgba(76, 175, 80, 0.35);
  border-color: rgba(76, 175, 80, 0.6);
}

.hi-report-btn.copy {
  background: rgba(100, 181, 246, 0.2);
  border-color: rgba(100, 181, 246, 0.4);
  color: #64b5f6;
}

.hi-report-btn.copy:hover {
  background: rgba(100, 181, 246, 0.35);
  border-color: rgba(100, 181, 246, 0.6);
}

.hi-report-checkbox-label {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: rgba(255, 193, 7, 0.15);
  border: 1px solid rgba(255, 193, 7, 0.3);
  border-radius: 6px;
  color: #ffc107;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
}

.hi-report-checkbox-label:hover {
  background: rgba(255, 193, 7, 0.25);
  border-color: rgba(255, 193, 7, 0.5);
}

.hi-report-checkbox-label input[type="checkbox"] {
  width: 14px;
  height: 14px;
  accent-color: #ffc107;
  cursor: pointer;
}